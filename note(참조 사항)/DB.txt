--1. 사용자 계정 테이블
CREATE TABLE USER_TABLE(
    USER_ID VARCHAR2(30) PRIMARY KEY
    ,USER_PW VARCHAR2(100) NOT NULL
    ,USER_NAME VARCHAR2(30) NOT NULL
    ,USER_GENDER VARCHAR2(10) --MALE, FEMAEL
    ,USER_TELL VARCHAR2(30)
    ,USER_ADDR VARCHAR2(30)
    ,USER_MAIL VARCHAR2(30)
    ,USER_ADDR_DETAIL VARCHAR2(30)
    ,USER_ROLE VARCHAR2(10) -- N, M
    ,USER_STATUS VARCHAR2(10) DEFAULT 'A' -- A, U, B
);

--2. 상품 종류 테이블
CREATE TABLE CATE(
    CATE_CODE VARCHAR2(50) PRIMARY KEY
    , CATE_NAME VARCHAR2(50) NOT NULL
    , CATE_STATUS VARCHAR(5) DEFAULT 'A' -- A, U
);

--3. 상품 테이블
CREATE TABLE ITEM(
    ITEM_CODE VARCHAR2(100) PRIMARY KEY
    ,ITEM_NAME VARCHAR2(100) NOT NULL
    ,ITEM_COMMENT VARCHAR2(500)
    ,ITEM_PRICE NUMBER(30) NOT NULL
    ,ITEM_STOCK NUMBER(30)
    ,CATE_CODE VARCHAR2(50) REFERENCES CATE (CATE_CODE) ON DELETE CASCADE
);

--4. 상품 이미지 테이블
CREATE TABLE ITEM_IMG(
    ITEM_IMG_CODE VARCHAR2(100) PRIMARY KEY
    , ITEM_IMG_NAME_ORIGIN      VARCHAR2(100) NOT NULL
    , ITEM_IMG_NAME_ATTACHED    VARCHAR2(100) NOT NULL
    , ITEM_IMG_IS_MAIN          VARCHAR2(20) NOT NULL       -- (Y, N)
    , ITEM_CODE VARCHAR2(100) NOT NULL
    CONSTRAINT ITEM_IMG_FK_REF_ITEM 
    REFERENCES ITEM(ITEM_CODE) ON DELETE CASCADE
);

-- 5. 장바구니
CREATE TABLE CART (
    CART_CODE VARCHAR2(50) PRIMARY KEY -- CART_001
    , ITEM_CODE VARCHAR2(50) REFERENCES ITEM (ITEM_CODE) NOT NULL
    , USER_ID VARCHAR2(100) REFERENCES USER_TABLE (USER_ID) NOT NULL
    , PUT_DATE DATE DEFAULT SYSDATE
    , PUT_CNT NUMBER(30) NOT NULL
    , TOTAL_PRICE NUMBER(30) NOT NULL
);

--6. 구매정보 테이블-- 쇼핑몰 테이블 생성
CREATE TABLE BUY (
    BUY_CODE VARCHAR2(50) PRIMARY KEY --BUY_001
    , USER_ID VARCHAR2(100) REFERENCES USER_TABLE (USER_ID)
    , BUY_DATE DATE DEFAULT SYSDATE
    , TOTAL_PRICE NUMBER NOT NULL
);

--7. 채널
CREATE TABLE CHANNEL(
    CHANNEL_CODE VARCHAR2(100) PRIMARY KEY
    , CHANNEL_TITLE VARCHAR2(100) NOT NULL
);
--8. 탭
CREATE TABLE TAP(
    TAP_CODE VARCHAR2(100) PRIMARY KEY
    , TAP_TITLE VARCHAR2(100) NOT NULL
    , CHANNEL_CODE VARCHAR2(100) NOT NULL
    REFERENCES CHANNEL (CHANNEL_CODE) ON DELETE CASCADE
);
--9. 게시판
CREATE TABLE BOARD(
    BOARD_CODE VARCHAR2(100) PRIMARY KEY
    , BOARD_TITLE VARCHAR2(100) NOT NULL
    , TAP_CODE VARCHAR2(100) NOT NULL
    REFERENCES TAP (TAP_CODE) ON DELETE CASCADE
);